#!/bin/bash

command_exists() {
    command -v "$1" >/dev/null 2>&1
}

get_command() {
    for cmd in "$@"; do
        if command_exists "$cmd"; then
            echo "$cmd"
            return
        fi
    done
}

cd_up() {
    local n=$1

    while [ "$n" -ne 0 ]; do
        cd ..
        n=$((n - 1))
    done
}

mkdev() {
    local environment_dev=$1
    local project_name=$2

    if command_exists "nix"; then
        nix flake new --template "github:the-nix-way/dev-templates#$environment_dev" "$project_name"
    fi
}

dump_flatpak() {
    flatpak list --app --columns=application > ~/Projects/dotfiles/installed_flatpaks.txt
}

pathadd() {
    if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]; then
        PATH="${PATH:+"$PATH:"}$1"
    fi
}

count_bits() {
    echo "obase=2;$1" | bc | grep -o 1 | wc -l
}

backup() {
    file=$1
    cp "$file" "$file.bak"
}

del() {
    local trash_dir="$HOME/.local/share/Trash/files"
    
    if [ -d "$trash_dir" ]; then
        mv "$@" "$trash_dir"
    else
        echo "Trash directory not found"
    fi
}
