set {
	$alt Mod1
	$mod Mod4
	$left h
	$down j
	$up k
	$right l
	
	$term footclient
	$launcher fuzzel
	$browser firefox
	$file_manager footclient nnn
	$wallpapers_path $HOME/Pictures/Wallpapers	
}

# Theme: Catppuccin
set {
	$teal #94E2D5
	$black #11111b
	$red #f28fad
	$peach #f8bd96
	#transparent #00000000
}

client.focused 			$teal	$teal	$black	$red	$teal
client.focused_inactive	$peach	$peach	$black	$red	$teal
client.unfocused		$peach	$peach	$black	$red	$peach
client.urgent			$red	$red	$black	$red	$red

seat seat0 {
	xcursor_theme Colloid-dark-cursors
	hide_cursor when-typing enable
}

# Misc optioms
focus_follows_mouse yes
floating_modifier $mod normal
floating_maximum_size 1366 x 768
default_orientation auto

# Aesthetics
default_border pixel 2
default_floating_border pixel 2
titlebar_border_thickness 2
title_align center
gaps inner 10
font pango:Iosevka Nerd Font Medium 12

# Output
output LVDS-1 {
	subpixel rgb
	adaptive_sync on
	max_render_time 6
	# bg $(find $wallpapers_path -type f | shuf -n 1) fill
}

# Input
input {
	type:keyboard {
		xkb_numlock enable
	}
	
	type:touchpad {
		drag enabled
		dwt enabled
		tap enabled
		natural_scroll enabled
		middle_emulation enabled
	}
}

bindsym {
	XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
    XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
    XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
    XF86AudioPlay exec playerctl play-pause
    XF86AudioNext exec playerctl next
    XF86AudioPrev exec playerctl previous
    XF86MonBrightnessUp exec light -A 10
    XF86MonBrightnessDown exec light -U 10
}

bindsym {
    # Applications
    $mod+Shift+f exec $browser
    $mod+Shift+m exec $file_manager
    $mod+Return exec $term
    $mod+Shift+Return exec $alt_term
    $mod+q kill
    $mod+d exec $menu
    $mod+Shift+c reload
	
	 # Screenshot
    Print exec grimshot --notify copy output
    $mod+Print exec grimshot --notify save output ~/Pictures/Screenshots/$(date +%F+%H:%M:%S).png
    Shift+Print exec grimshot --notify copy area
    $mod+Shift+Print exec grimshot --notify save area ~/Pictures/Screenshots/$(date +%F+%H:%M:%S).png

    $mod+Left focus left
    $mod+Down focus down
    $mod+Up focus up
    $mod+Right focus right 
	
    $mod+$left focus left
    $mod+$down focus down
    $mod+$up focus up
    $mod+$right focus right 

    $mod+Shift+Left move left
    $mod+Shift+Down move down
    $mod+Shift+Up move up
    $mod+Shift+Right move right
	
    $mod+Shift+$left move left
    $mod+Shift+$down move down
    $mod+Shift+$up move up
    $mod+Shift+$right move right

    $mod+1 workspace number 1
    $mod+2 workspace number 2
    $mod+3 workspace number 3
    $mod+4 workspace number 4
    $mod+5 workspace number 5
    $mod+6 workspace number 6
	
	
    $mod+Shift+1 move container to workspace number 1
    $mod+Shift+2 move container to workspace number 2
    $mod+Shift+3 move container to workspace number 3
    $mod+Shift+4 move container to workspace number 4
    $mod+Shift+5 move container to workspace number 5
    $mod+Shift+6 move container to workspace number 6

    $mod+Ctrl+Left workspace prev
    $mod+Ctrl+Right workspace next
    $mod+$alt+Left workspace prev
    $mod+$alt+Right workspace next
    Ctrl+$alt+Left workspace prev
    Ctrl+$alt+Right workspace next

    $mod+Ctrl+$left workspace prev
    $mod+Ctrl+$right workspace next
    $mod+$alt+$left workspace prev
    $mod+$alt+$right workspace next
    Ctrl+$alt+$left workspace prev
    Ctrl+$alt+$right workspace next

    $mod+b splith
    $mod+v splitv

    $mod+f fullscreen
    $mod+Shift+space floating toggle
    $mod+space focus mode_toggle

    $mod+a focus parent

    $mod+Shift+o move scratchpad
    $mod+Shift+p scratchpad show
}

mode "Resize" {
    bindsym {
        $left resize shrink width 20px
        $down resize grow height 20px
        $up resize shrink height 20px
        $right resize grow width 20px
	
        Left resize shrink width 20px
        Down resize grow height 20px
        Up resize shrink height 20px
        Right resize grow width 20px

        Return mode "default"
        Escape mode "default"
    }
}

mode "Layout" {
    bindsym --to-code {
        d layout stacking     ; mode "default"
        t layout tabbed       ; mode "default"
        s layout toggle split ; mode "default"
        v layout splitv       ; mode "default"
        b layout splith       ; mode "default"

        Return mode "default"
        Escape mode "default"
    }
}

bindsym {
    $mod+r mode "Resize"
    $mod+t mode "Layout"
}

# Automove rules
assign {
	[app_id="firefox"] 2
    [class="Code"] 3
}

# Window rules
for_window {
    [window_role="pop-up"] floating enable
    [window_role="bubble"] floating enable
    [window_role="dialog"] floating enable
    [window_type="dialog"] floating enable
    [window_role="task_dialog"] floating enable

    [title="(?:Open|Save) (?:File|Folder|As)"] floating enable, sticky enable
    [title="File Upload"] floating enable, sticky enable
    [title="Firefox â€” Sharing Indicator"] floating enable
    [title="^Picture-in-Picture"] floating enable, sticky enable

    [class="qemu-system-x86_64"] floating enable, inhibit_idle focus

    [shell="xwayland"] title_format "%title [XWayland]"

    [app_id="firefox"] inhibit_idle fullscreen, max_render_time off
    [app_id="qemu|zenmonitor|mpv|imv|timeshift-gtk"] floating enable, inhibit_idle visible, max_render_time off
    [app_id="telegram-desktop"] floating enable
}

bar {
    swaybar_command waybar
}

include /etc/sway/config.d/*

# Autostart
exec {
    foot --server
	dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
}
